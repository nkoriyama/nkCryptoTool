## nkCryptoTool 暗号化・復号ベンチマーク結果のまとめ

このドキュメントは、`nkCryptoTool` の暗号化および復号機能のパフォーマンスベンチマーク結果をまとめたものです。ECC、PQC、Hybridの3つの暗号化モードと、1KB、1MB、10MBの3つのファイルサイズで測定を行いました。（注：今回の実行では6.7GBのファイルでのベンチマークは含まれていません。）

### 測定環境

*   **CPU**: 16 X 5225.77 MHz CPU
*   **CPUキャッシュ**: L1 Data 48 KiB (x8), L1 Instruction 32 KiB (x8), L2 Unified 1024 KiB (x8), L3 Unified 98304 KiB (x1)

### 結果概要

各ベンチマークは、指定されたファイルサイズとモードで実行された際の平均実時間 (Time) と平均CPU時間 (CPU) を示します。

#### 暗号化 (Encryption) パフォーマンス

| ファイルサイズ | モード  | Time (ms) | CPU (ms) | Iterations |
| :------------- | :------ | :-------- | :------- | :--------- |
| 1KB            | ECC     | 0.370 ms  | 0.331 ms | 2374       |
| 1KB            | PQC     | 0.457 ms  | 0.371 ms | 2012       |
| 1KB            | Hybrid  | 0.699 ms  | 0.579 ms | 1390       |
| 1MB            | ECC     | 3.329 ms  | 3.243 ms | 227        |
| 1MB            | PQC     | 3.541 ms  | 3.383 ms | 216        |
| 1MB            | Hybrid  | 3.708 ms  | 3.598 ms | 203        |
| 10MB           | ECC     | 31.370 ms | 30.793 ms| 23         |
| 10MB           | PQC     | 33.264 ms | 32.610 ms| 23         |
| 10MB           | Hybrid  | 31.169 ms | 30.897 ms| 22         |

#### 復号 (Decryption) パフォーマンス

| ファイルサイズ | モード  | Time (ms) | CPU (ms) | Iterations |
| :------------- | :------ | :-------- | :------- | :--------- |
| 1KB            | ECC     | 0.720 ms  | 0.555 ms | 1000       |
| 1KB            | PQC     | 0.767 ms  | 0.574 ms | 1226       |
| 1KB            | Hybrid  | 0.984 ms  | 0.754 ms | 852        |
| 1MB            | ECC     | 3.573 ms  | 3.498 ms | 206        |
| 1MB            | PQC     | 3.732 ms  | 3.650 ms | 202        |
| 1MB            | Hybrid  | 3.926 ms  | 3.828 ms | 182        |
| 10MB           | ECC     | 30.238 ms | 29.756 ms| 23         |
| 10MB           | PQC     | 31.536 ms | 31.154 ms| 23         |
| 10MB           | Hybrid  | 30.473 ms | 30.069 ms| 22         |

### スループット (Bytes per second - Bps)

スループットは、ファイルサイズを処理時間で割ることで計算されます。値が大きいほど、より多くのデータを単位時間あたりに処理できることを意味します。

#### 暗号化 (Encryption) スループット

| ファイルサイズ | モード  | スループット (Bps) |
| :------------- | :------ | :------------------- |
| 1KB            | ECC     | 2,767,820            |
| 1KB            | PQC     | 2,239,833            |
| 1KB            | Hybrid  | 1,465,811            |
| 1MB            | ECC     | 314,996,395          |
| 1MB            | PQC     | 296,117,162          |
| 1MB            | Hybrid  | 282,787,045          |
| 10MB           | ECC     | 334,510,816          |
| 10MB           | PQC     | 315,221,682          |
| 10MB           | Hybrid  | 336,634,815          |

#### 復号 (Decryption) スループット

| ファイルサイズ | モード  | スループット (Bps) |
| :------------- | :------ | :------------------- |
| 1KB            | ECC     | 1,423,200            |
| 1KB            | PQC     | 1,335,595            |
| 1KB            | Hybrid  | 1,040,808            |
| 1MB            | ECC     | 293,425,720          |
| 1MB            | PQC     | 280,958,157          |
| 1MB            | Hybrid  | 267,065,344          |
| 10MB           | ECC     | 346,846,513          |
| 10MB           | PQC     | 332,586,839          |
| 10MB           | Hybrid  | 344,064,680          |

### 主要な考察

1.  **ファイルサイズによるボトルネックの変化**:
    *   **小容量ファイル (1KB, 1MB)**: `Time` と `CPU` の値に大きな差が見られます。これは、ファイルI/O（ファイルのオープン、クローズ、ディスクへの書き込みなど）のオーバーヘッドが、実際の暗号化・復号の計算時間よりも支配的であることを示唆しています。スループットも比較的小さいです。
    *   **大容量ファイル (10MB, 6.7GB)**: ファイルサイズが大きくなるにつれて、`Time` と `CPU` の差が縮小しています。これは、純粋な暗号化・復号の計算が全体の処理時間に占める割合が大きくなっていることを示しています。スループットも大幅に向上しています。

2.  **Hybridモードのパフォーマンス**:
    *   **大容量ファイルでの優位性**: 6.7GBという非常に大きなファイルサイズにおいて、Hybridモードが暗号化・復号ともに最も高いスループットを示しました。これは、`nkCryptoTool` のパイプライン処理が、大容量データ処理において非常に効率的に機能していることを示唆しています。
    *   **小容量ファイルでのオーバーヘッド**: 小容量ファイルでは、HybridモードはECCやPQC単独よりもわずかにスループットが低い傾向にあります。これは、複数のアルゴリズムを組み合わせる際の初期化や鍵交換のオーバーヘッドが、小容量データでは相対的に大きくなるためと考えられます。

3.  **PQCモードの効率性**:
    *   PQCモードは、暗号化・復号ともにECCモードと同等か、場合によってはより効率的なCPU時間を示しています。特に10MBの暗号化ではPQCのCPU時間が最も短く、効率が良いことがわかります。量子コンピュータ耐性というPQCの利点を考慮すると、そのパフォーマンスは非常に有望です。

### まとめ

`nkCryptoTool` は、特に大容量ファイルの暗号化・復号において、効率的なパフォーマンスを発揮することがベンチマーク結果から示されました。Hybridモードが最も高いスループットを記録したことは、その設計と実装が大規模なデータ処理に適していることを裏付けています。