## nkCryptoTool 暗号化・復号ベンチマーク結果のまとめ

このドキュメントは、`nkCryptoTool` の暗号化および復号機能のパフォーマンスベンチマーク結果をまとめたものです。ECC、PQC、Hybridの3つの暗号化モードと、1KB、1MB、10MB、6.7GBの4つのファイルサイズで測定を行いました。

### 測定環境

*   **CPU**: 16 X 4700 MHz CPU
*   **CPUキャッシュ**: L1 Data 48 KiB (x8), L1 Instruction 32 KiB (x8), L2 Unified 1024 KiB (x8), L3 Unified 98304 KiB (x1)

### 結果概要

各ベンチマークは、指定されたファイルサイズとモードで実行された際の平均実時間 (Time) と平均CPU時間 (CPU) を示します。単位はナノ秒 (ns) ですが、可読性のため秒 (s) またはミリ秒 (ms) に変換して表示します。

#### 暗号化 (Encryption) パフォーマンス

| ファイルサイズ | モード  | Time (ms/s) | CPU (ms/s) | Iterations |
| :------------- | :------ | :---------- | :--------- | :--------- |
| 1KB            | ECC     | 16.58 ms    | 0.73 ms    | 320        |
| 1KB            | PQC     | 17.70 ms    | 1.09 ms    | 1120       |
| 1KB            | Hybrid  | 20.50 ms    | 1.86 ms    | 252        |
| 1MB            | ECC     | 30.99 ms    | 0.94 ms    | 100        |
| 1MB            | PQC     | 31.14 ms    | 1.41 ms    | 100        |
| 1MB            | Hybrid  | 30.99 ms    | 3.30 ms    | 90         |
| 10MB           | ECC     | 35.81 ms    | 12.80 ms   | 205        |
| 10MB           | PQC     | 35.09 ms    | 10.04 ms   | 112        |
| 10MB           | Hybrid  | 32.81 ms    | 15.31 ms   | 50         |
| 6.7GB          | ECC     | 11.32 s     | 6.25 s     | 1          |
| 6.7GB          | PQC     | 14.45 s     | 8.53 s     | 1          |
| 6.7GB          | Hybrid  | 8.27 s      | 6.28 s     | 1          |

#### 復号 (Decryption) パフォーマンス

| ファイルサイズ | モード  | Time (ms/s) | CPU (ms/s) | Iterations |
| :------------- | :------ | :---------- | :--------- | :--------- |
| 1KB            | ECC     | 15.74 ms    | 1.65 ms    | 407        |
| 1KB            | PQC     | 16.29 ms    | 0.77 ms    | 1000       |
| 1KB            | Hybrid  | 19.91 ms    | 1.51 ms    | 166        |
| 1MB            | ECC     | 30.97 ms    | 2.97 ms    | 100        |
| 1MB            | PQC     | 31.01 ms    | 2.50 ms    | 100        |
| 1MB            | Hybrid  | 26.91 ms    | 2.34 ms    | 100        |
| 10MB           | ECC     | 31.84 ms    | 8.33 ms    | 90         |
| 10MB           | PQC     | 32.18 ms    | 10.01 ms   | 64         |
| 10MB           | Hybrid  | 33.32 ms    | 13.75 ms   | 100        |
| 6.7GB          | ECC     | 15.91 s     | 9.38 s     | 1          |
| 6.7GB          | PQC     | 15.79 s     | 9.02 s     | 1          |
| 6.7GB          | Hybrid  | 10.69 s     | 7.33 s     | 1          |

### スループット (Bytes per second - Bps)

スループットは、ファイルサイズを処理時間で割ることで計算されます。値が大きいほど、より多くのデータを単位時間あたりに処理できることを意味します。

#### 暗号化 (Encryption) スループット

| ファイルサイズ | モード  | スループット (Bps) |
| :------------- | :------ | :----------------- |
| 1KB            | ECC     | 61753              |
| 1KB            | PQC     | 57839              |
| 1KB            | Hybrid  | 49949              |
| 1MB            | ECC     | 33827000           |
| 1MB            | PQC     | 33677000           |
| 1MB            | Hybrid  | 33837000           |
| 10MB           | ECC     | 292820000          |
| 10MB           | PQC     | 298820000          |
| 10MB           | Hybrid  | 319530000          |
| 6.7GB          | ECC     | 593490000          |
| 6.7GB          | PQC     | 465050000          |
| 6.7GB          | Hybrid  | 812060000          |

#### 復号 (Decryption) スループット

| ファイルサイズ | モード  | スループット (Bps) |
| :------------- | :------ | :----------------- |
| 1KB            | ECC     | 65054              |
| 1KB            | PQC     | 62854              |
| 1KB            | Hybrid  | 51430              |
| 1MB            | ECC     | 33853000           |
| 1MB            | PQC     | 33809000           |
| 1MB            | Hybrid  | 38972000           |
| 10MB           | ECC     | 329290000          |
| 10MB           | PQC     | 325890000          |
| 10MB           | Hybrid  | 314730000          |
| 6.7GB          | ECC     | 422340000          |
| 6.7GB          | PQC     | 425390000          |
| 6.7GB          | Hybrid  | 628480000          |

### 主要な考察

1.  **ファイルサイズによるボトルネックの変化**:
    *   **小容量ファイル (1KB, 1MB)**: `Time` と `CPU` の値に大きな差が見られます。これは、ファイルI/O（ファイルのオープン、クローズ、ディスクへの書き込みなど）のオーバーヘッドが、実際の暗号化・復号の計算時間よりも支配的であることを示唆しています。スループットも比較的小さいです。
    *   **大容量ファイル (10MB, 6.7GB)**: ファイルサイズが大きくなるにつれて、`Time` と `CPU` の差が縮小しています。これは、純粋な暗号化・復号の計算が全体の処理時間に占める割合が大きくなっていることを示しています。スループットも大幅に向上しています。

2.  **Hybridモードのパフォーマンス**:
    *   **大容量ファイルでの優位性**: 6.7GBという非常に大きなファイルサイズにおいて、Hybridモードが暗号化・復号ともに最も高いスループットを示しました。これは、`nkCryptoTool` のパイプライン処理が、大容量データ処理において非常に効率的に機能していることを示唆しています。
    *   **小容量ファイルでのオーバーヘッド**: 小容量ファイルでは、HybridモードはECCやPQC単独よりもわずかにスループットが低い傾向にあります。これは、複数のアルゴリズムを組み合わせる際の初期化や鍵交換のオーバーヘッドが、小容量データでは相対的に大きくなるためと考えられます。

3.  **PQCモードの効率性**:
    *   PQCモードは、暗号化・復号ともにECCモードと同等か、場合によってはより効率的なCPU時間を示しています。特に10MBの暗号化ではPQCのCPU時間が最も短く、効率が良いことがわかります。量子コンピュータ耐性というPQCの利点を考慮すると、そのパフォーマンスは非常に有望です。

### まとめ

`nkCryptoTool` は、特に大容量ファイルの暗号化・復号において、効率的なパフォーマンスを発揮することがベンチマーク結果から示されました。Hybridモードが最も高いスループットを記録したことは、その設計と実装が大規模なデータ処理に適していることを裏付けています。